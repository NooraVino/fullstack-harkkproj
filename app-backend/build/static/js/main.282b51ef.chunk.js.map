{"version":3,"sources":["services/user.js","components/UserList.js","services/login.js","components/LoginForm.js","services/gift.js","components/NewGiftForm.js","components/Home.js","index.js"],"names":["baseUrl","token","getUsers","config","headers","Authorization","axios","get","then","response","data","setToken","newToken","getOneUser","id","a","getToken","UserList","setUser","user","useState","users","setUsers","useHistory","useEffect","loggedUserJSON","window","localStorage","getItem","userp","JSON","parse","userService","filter","u","console","log","className","map","username","gifts","gift","name","content","href","url","title","login","credentials","post","LoginForm","setLoggedUser","setGifts","setUsername","password","setPassword","errorMessage","setErrorMessage","history","handleLogin","event","preventDefault","loginService","setItem","stringify","push","setTimeout","onSubmit","placeholder","type","value","onChange","target","setNewGift","NewGiftForm","setName","setContent","setUrl","handleGiftAdd","giftService","concat","Home","App","page","setPage","loggedUser","loggedUserp","onClick","removeItem","to","exact","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.282b51ef.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/users'\n\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n\n}\n\nconst getToken = () => token\n\nconst getUsers = () => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const request = axios.get(baseUrl, config)\n\n  return request.then(response => response.data)\n}\n\nconst getOneUser = async (id) => {\n  const response = await axios.get(`${baseUrl}/${id} `)\n  //console.log(response.data)\n  return response.data\n\n}\n\nexport default { getUsers, setToken, getOneUser, getToken }","import React, { useState, useEffect } from 'react';\nimport userService from '../services/user'\nimport { useHistory } from 'react-router-dom'\n\nconst UserList = ({ setUser, user }) => {\n  const [users, setUsers] = useState([]);\n  //const [user, setUser] = useState(null);\n\n  const history = useHistory()\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedUser')\n    if (loggedUserJSON) {\n      const userp = JSON.parse(loggedUserJSON)\n      setUser(userp)\n      userService.setToken(userp.token)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (user) {\n      userService.getUsers().then((response) => {\n        setUsers(response.filter(u => u.id !== user.id))\n      })\n    }\n  }, [])\n\n\n  if (users) {\n    console.log(users)\n  }\n  return (\n    <div>\n      <h2 className=\"header\">Kaikkien lahjatoiveet:</h2>\n\n      {users.map((user) => (\n        <div key={user.id} className=\"user\" >\n          <h3 className=\"header\"> {user.username}n toiveet</h3> \n          { <div>{user.gifts.map(gift =>\n            <div key={gift.id + user.id} className=\"gift-item\">\n              <div className=\"gift-name\"> {gift.name}</div>\n              <div className=\"gift-content\"> {gift.content}</div>\n              <div className=\"gift-url\">\n                    <a href={gift.url} title={gift.url}>{gift.url}</a>\n                  </div>\n            </div>\n          )}</div>\n          }\n        </div>\n\n\n      ))}\n\n\n    </div>\n\n  )\n}\n\nexport default UserList","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }","import React, { useState } from 'react';\nimport loginService from '../services/login'\nimport userService from '../services/user'\nimport { useHistory } from 'react-router-dom'\n\nconst LoginForm = ({ setUser, setLoggedUser, setGifts }) => {\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n\n\n  const history = useHistory()\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n\n    try {\n      const user = await loginService.login({\n        username, password,\n      })\n\n      window.localStorage.setItem(\n        'loggedUser', JSON.stringify(user)\n      )\n\n      userService.setToken(user.token)\n      userService.getOneUser(user.id).then((response) => {\n        setUser(response)\n        setGifts(response.gifts)\n      })\n\n      //console.log(user.id)\n      setLoggedUser(user)\n      setUsername('')\n      setPassword('')\n      history.push('/')\n    } catch (exception) {\n      setErrorMessage('Väärä käyttäjätunnus tai salasana')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n      setUsername('')\n      setPassword('')\n    }\n\n  }\n  return (\n    <div className=\"form\">\n      <div className=\"error\">{errorMessage}</div>\n      <form onSubmit={handleLogin}>\n        <div>\n          Käyttäjänimi\n        <input\n            className=\"input\"\n            placeholder=\"käyttäjänimi\"\n            type=\"text\"\n            value={username}\n            name=\"Username\"\n            onChange={({ target }) => setUsername(target.value)}\n          />\n        </div>\n        <div>\n          Salasana\n        <input\n            className=\"input\"\n            placeholder=\"salasana\"\n            type=\"password\"\n            value={password}\n            name=\"Password\"\n            onChange={({ target }) => setPassword(target.value)}\n          />\n        </div>\n        <button className=\"button\" type=\"submit\">Kirjaudu sisään</button>\n      </form>\n    </div>\n  )\n}\nexport default LoginForm","import axios from 'axios'\nimport userService from '../services/user'\nconst baseUrl = '/api/gifts'\n\n\nconst setNewGift = async (gift) => {\n  const config = {\n    headers: { Authorization: userService.getToken() },\n  }\n  //console.log(gift)\n  const response = await axios.post(baseUrl, gift, config)\n  console.log(response.data)\n  return response.data\n}\n\n\n\nexport default { setNewGift }","import React, { useState } from 'react';\nimport giftService from '../services/gift'\nimport { useHistory } from 'react-router-dom'\n\nconst NewGiftForm = ({ user, gifts, setGifts }) => {\n  const [name, setName] = useState('')\n  const [content, setContent] = useState('')\n  const [url, setUrl] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n\n\n  const history = useHistory()\n\n  const handleGiftAdd = async (event) => {\n    event.preventDefault()\n\n    const id = user.id\n\n    try {\n      const gift = await giftService.setNewGift({\n        name, content, url, id\n      })\n\n      setName('')\n      setContent('')\n      setUrl('')\n      setGifts(gifts.concat(gift))\n      history.push('/')\n    } catch (exception) {\n\n      setErrorMessage('Toivetta ei voi lisätä ilman nimeä!')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n\n    }\n  }\n\n\n  return (\n    <div className=\"form\">\n      <div className=\"error\">{errorMessage}</div>\n      <form onSubmit={handleGiftAdd}>\n        <div>\n          Lahjatoive\n        <input\n            className=\"input\"\n            placeholder=\"Lahjatoiveen nimi..\"\n            type=\"text\" \n            value={name}\n            name=\"name\"\n            onChange={({ target }) => setName(target.value)}\n          />\n        </div>\n        <div>\n          Kuvaus:\n        <input\n            className=\"input\"\n            placeholder=\"Vapaamuotoinen kuvaus..\"\n            type=\"text\"\n            value={content}\n            name=\"content\"\n            onChange={({ target }) => setContent(target.value)}\n          />\n        </div>\n        <div >\n          Linkki:\n        <input\n            className=\"input\"\n            placeholder=\"Mahdollisia linkkejä..\"\n            type=\"text\"\n            value={url}\n            name=\"url\"\n            onChange={({ target }) => setUrl(target.value)}\n          />\n        </div>\n\n\n\n        <button className=\"button\" type=\"submit\">lisää toive</button>\n      </form>\n    </div>\n  )\n}\nexport default NewGiftForm","\nimport React, { useEffect, useState } from 'react'\nimport user from '../services/user';\nimport userService from '../services/user'\nimport NewGiftForm from './NewGiftForm'\n\nconst Home = ({ user, gifts, setGifts }) => {\n\n\n  return (\n    <div className=\"row\">\n      <div className=\"column\">\n        {user && gifts\n          ? <div> \n            <span >\n              {gifts.map(u =>\n                <div key={u.id} className=\"gift-item\">\n                  <div className=\"gift-name\">{u.name} </div>\n                  <div className=\"gift-content\">{u.content}</div>\n                  <div className=\"gift-url\">\n                    <a href={u.url} title={u.url}>{u.url}</a>\n                  </div>\n                </div>\n              )}</span>\n          </div>\n\n          : <div>ei käyttäjiä </div>}\n      </div>\n      <div className=\"column\">\n        <NewGiftForm user={user} gifts={gifts} setGifts={setGifts} />\n      </div>\n\n\n    </div>\n  )\n}\n\nexport default Home","import React, { useState, useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport UserList from './components/UserList'\nimport LoginForm from './components/LoginForm'\nimport Home from './components/Home'\nimport userService from './services/user'\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect } from \"react-router-dom\"\nimport './index.css'\n\n\nconst App = () => {\n  const [user, setUser] = useState(null)\n  const [page, setPage] = useState('muiden');\n  const [loggedUser, setLoggedUser] = useState(() => { return window.localStorage.getItem('loggedUser') })\n  const [gifts, setGifts] = useState([]);\n\n\n  useEffect(() => {  \n      const loggedUserJSON = window.localStorage.getItem('loggedUser')\n      if (loggedUserJSON) {\n        const loggedUserp = JSON.parse(loggedUserJSON)\n\n        userService.setToken(loggedUserp.token)\n        userService.getOneUser(loggedUserp.id).then((response) => {\n          setUser(response)   \n          setGifts(response.gifts)        \n        })\n      }\n  }, [])\n\n\n  const logout = () => {\n    window.localStorage.removeItem('loggedUser')\n    setUser(null)\n    setLoggedUser(null)\n    setGifts(null)\n    userService.setToken(null)\n  }\n\n  return (\n    <div>\n      <Router>\n        <div >\n          {loggedUser\n            ? <div className=\"topnav\">\n              <button className=\"logout-button\" onClick={() => logout()}>Kirjaudu ulos</button>\n              <div>{page === 'muiden'\n                ? <Link to=\"/users\" className=\"topnav-link\" onClick={() => setPage('oma')}>kaikkien toiveet</Link> \n                : <Link to=\"/\" className=\"topnav-link\" onClick={() => setPage('muiden')}>oma sivu</Link>\n              }</div>\n\n            </div>\n            : <div></div>\n\n          }\n        </div>\n\n\n        <Switch>\n          <Route exact path=\"/users\">\n            {loggedUser ? <UserList setUser={setUser}user={user} /> : <Redirect to=\"/login\" />}\n          </Route>\n          <Route exact path=\"/login\">\n            <LoginForm setUser={setUser} setLoggedUser={setLoggedUser} setGifts={setGifts} />\n          </Route>\n          <Route exact path=\"/\">\n            {loggedUser ? <Home user={user} gifts={gifts} setGifts={setGifts} /> : <Redirect to=\"/login\" />}\n          </Route>\n        </Switch>\n\n\n\n        {/* <div>\n      <br />\n        <em>Nooran hieno lahjatoiveSovellus</em>\n      </div> */}\n\n      </Router>\n    </div>\n\n  )\n\n}\n\n\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}